const { faker } = require('@faker-js/faker');
const User = require('../models/userModel.js');
const Post = require('../models/postModel.js');

const generateUsersAndPosts = async (count) => {
    for (let i = 0; i < count; i++) {
      const user = {
        username: faker.internet.userName(),
        first_name: faker.name.firstName(),
        last_name: faker.name.lastName(),
        email: faker.internet.email(),
      };
  
      const createdUser = await User.query().insert(user);
  
      for (let j = 0; j < 10; j++) {
        const post = {
          content: faker.lorem.sentence(3),
          user_id: createdUser.id,
        };
        await Post.query().insert(post);
      }
    }
  };
  
  module.exports = {
    generateUsersAndPosts,
  };