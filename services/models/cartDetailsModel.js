const Model = require('../db/db.js');

class CartDetails extends Model {
    static get tableName() {
        return 'cart_details';
    }

    static get idColumn() {
        return 'id';
    }

    static get jsonSchema() {
        return {
            type: 'object',
            required: ['cart_id', 'product_id'],

            properties: {
                id: { type: 'integer' },
                cart_id: { type: 'integer' },
                product_id: { type: 'integer' },
                quantity: { type: 'integer' }
            },
        };
    }

    static async getAll() {
        return await this.query();
    }

    static async createCartDetails(cart_id, product_id, quantity) {
        return await this.query().insert({ cart_id, product_id, quantity });
    }

    static async getCartDetailsById(id) {
        return await this.query().findById(id);
    }

    static async updateCartDetailsById(id, cart_id, product_id, quantity) {
        return await this.query().patchAndFetchById(id, { cart_id, product_id, quantity });
    }

}

module.exports = CartDetails;