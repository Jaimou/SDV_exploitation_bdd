const Model = require('../db/db.js');

class Cart extends Model {
    static get tableName() {
        return 'carts';
    }

    static get idColumn() {
        return 'id';
    }

    static get jsonSchema() {
        return {
            type: 'object',
            required: ['client_id'],

            properties: {
                id: { type: 'integer' },
                date: { type: 'string', minLength: 1, maxLength: 10 },
                client_id: { type: 'integer' }
            },
        };
    }

    static async getAll() {
        return await this.query();
    }

    static async createCart(date, client_id) {
        return await this.query().insert({ date, client_id });
    }

    static async getCartById(id) {
        return await this.query().findById(id);
    }   

    static async updateCartById(id, date, client_id ) {
        return await this.query().patchAndFetchById(id, { date, client_id });
    }
}

module.exports = Cart;