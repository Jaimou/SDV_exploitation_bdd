const Model = require('../db/db.js');

class Product extends Model {
    static get tableName() {
        return 'products';
    }

    static get idColumn() {
        return 'id';
    }

    static get jsonSchema() {
        return {
            type: 'object',
            required: ['label'],

            properties: {
                id: { type: 'integer' },
                label: { type: 'string', minLength: 1, maxLength: 50 },
                description: { type: 'string', minLength: 1, maxLength: 150 },
                price: { type: 'number', minimum: 0},
                stock_quantity: { type: 'integer'}
            },
        };
    }

    static async getAll() {
        return await this.query();
    }

    static async createProduct(product) {
        return await this.query().insert(product);
    }

    static async getProductById(id) {
        return await this.query().findById(id);
    }

    static async updateProductById(id, label, description, price, stock_quantity) {
        return await this.query().patchAndFetchById(id, { label, description, price, stock_quantity });
    }
    
}

module.exports = Product;